<%#
  Define Rust - SplashKit interface
%>
#![allow(non_snake_case)]
#[link(name = "SplashKit")]
extern "C" {
<%
  @functions.each do |function|
%>
  <%= lib_signature_for(function) %>;

<%
  end # functions.each
%>
}

// ---------

<%= read_template 'implementation/mappers' %>

// ---------
<%#
  Implement Rust functions -- Rust --> this code --> Interface --> C/C++
%>
<%
  @functions.each do |function|
    lib_fn_name = lib_function_name_for(function)
    param_list  = lib_argument_list_for(function)
    func_call   = "#{lib_fn_name}(#{param_list})"
%>
pub <%= sk_signature_for(function) %> {
<%
    # Declare each parameter prefixed with __skparam
    function[:parameters].each do |param_name, param_data|
%>
  let __skparam__<%= param_name %>: <%= lib_type_for(param_data) %> = <%= lib_mapper_fn_for param_data %>(<%= param_name.variable_case %>);
<%
    end # end parameters.each
%>
  unsafe {
    <%= func_call %>;
  }
}
<%
  end # functions.each
%>